#!/usr/bin/env bash
# creating a custom nginx response header
sudo apt update
sudo apt install -y nginx

custom_header_name="X-Served-By"
custom_header_value="$(hostname)"

# Define the Nginx configuration file path
nginx_config_file="/etc/nginx/sites-available/default"

# Check if the Nginx configuration file exists
if [ -f "$nginx_config_file" ]; then
    # Use sed to add the custom header to the Nginx configuration file
    sudo sed -i "/server_name _;/a \ \n    add_header $custom_header_name \"$custom_header_value\";" "$nginx_config_file"

fi
# Restart Nginx
sudo service nginx restart
